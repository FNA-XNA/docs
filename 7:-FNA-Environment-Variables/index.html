<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>7: FNA Environment Variables - FNA Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/styles.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "7: FNA Environment Variables";
        var mkdocs_page_input_path = "7:-FNA-Environment-Variables.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="..">
          <img src="../img/logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../0%3A-FAQ/">0: FAQ</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../1%3A-Setting-Up-FNA/">1: Setting Up FNA</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../2a%3A-Building-XNA-Games-with-FNA/">2a: Building XNA Games with FNA</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../2b%3A-Building-New-Games-with-FNA/">2b: Building New Games with FNA</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../3%3A-Distributing-FNA-Games/">3: Distributing FNA Games</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../4%3A-FNA-and-Windows-API/">4: FNA and Windows API</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../5%3A-FNA-Extensions/">5: FNA Extensions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../6%3A-FNA-Build-Options/">6: FNA Build Options</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">7: FNA Environment Variables</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#fna_graphics_enable_highdpi">FNA_GRAPHICS_ENABLE_HIGHDPI</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna_graphics_jpeg_save_quality">FNA_GRAPHICS_JPEG_SAVE_QUALITY</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna_keyboard_use_scancodes">FNA_KEYBOARD_USE_SCANCODES</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna_gamepad_num_gamepads">FNA_GAMEPAD_NUM_GAMEPADS</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna_sdl_force_base_path">FNA_SDL_FORCE_BASE_PATH</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna3d_force_driver">FNA3D_FORCE_DRIVER</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna3d_enable_hdr_colorspace">FNA3D_ENABLE_HDR_COLORSPACE</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna3d_enable_lateswaptear">FNA3D_ENABLE_LATESWAPTEAR</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna3d_mojoshader_profile">FNA3D_MOJOSHADER_PROFILE</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna3d_backbuffer_scale_nearest">FNA3D_BACKBUFFER_SCALE_NEAREST</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna3d_opengl_window_depthstencilformat">FNA3D_OPENGL_WINDOW_DEPTHSTENCILFORMAT</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna3d_opengl_force_es3">FNA3D_OPENGL_FORCE_ES3</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna3d_opengl_force_core_profile">FNA3D_OPENGL_FORCE_CORE_PROFILE</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fna3d_opengl_force_compatibility_profile">FNA3D_OPENGL_FORCE_COMPATIBILITY_PROFILE</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../8%3A-Contributing-to-FNA/">8: Contributing to FNA</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Appendix</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../appendix/Appendix-A%3A-NativeAOT-on-PC/">Appendix A: NativeAOT on PC</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../appendix/Appendix-B%3A-FNA-on-Consoles/">Appendix B: FNA on Consoles</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../appendix/Appendix-C%3A-FNA-on-Apple-Platforms/">Appendix C: FNA on Apple Platforms</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../appendix/Appendix-D%3A-MonoGame/">Appendix D: MonoGame Compatibility</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../appendix/Appendix-F%3A-Upcoming-Support-Changes/">Appendix F: Upcoming Support Changes</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">FNA Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">7: FNA Environment Variables</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/FNA-XNA/docs/blob/main/docs/7:-FNA-Environment-Variables.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="7-fna-environment-variables">7: FNA Environment Variables</h1>
<p>FNA will check for certain environment variables to perform certain tasks in a non-default manner. For the most part these are meant to be used by both developers and customers, but there are also cases where we use environment variables as a means of working around a specific problem without requiring a build-time option/configuration.</p>
<p><strong>NOTE:</strong> .NET Core intentionally broke native library compatibility with <code>System.Environment.SetEnvironmentVariable</code>, so for any FNA3D environment variables, we recommend using <code>SDL_SetHint</code> instead, even though this will have to be updated when SDL3 is released. The documentation below uses this function, if you need an example. (You are of course welcome to continue using .NET Framework and Mono instead, which does not have this issue.)</p>
<p>FNA:</p>
<ul>
<li><a href="#fna_graphics_enable_highdpi">FNA_GRAPHICS_ENABLE_HIGHDPI</a></li>
<li><a href="#fna_graphics_jpeg_save_quality">FNA_GRAPHICS_JPEG_SAVE_QUALITY</a></li>
<li><a href="#fna_keyboard_use_scancodes">FNA_KEYBOARD_USE_SCANCODES</a></li>
<li><a href="#fna_gamepad_num_gamepads">FNA_GAMEPAD_NUM_GAMEPADS</a></li>
<li><a href="#fna_sdl_force_base_path">FNA_SDL_FORCE_BASE_PATH</a></li>
</ul>
<p>FNA3D:</p>
<ul>
<li><a href="#fna3d_force_driver">FNA3D_FORCE_DRIVER</a></li>
<li><a href="#fna3d_enable_hdr_colorspace">FNA3D_ENABLE_HDR_COLORSPACE</a></li>
<li><a href="#fna3d_enable_lateswaptear">FNA3D_ENABLE_LATESWAPTEAR</a></li>
<li><a href="#fna3d_mojoshader_profile">FNA3D_MOJOSHADER_PROFILE</a></li>
<li><a href="#fna3d_backbuffer_scale_nearest">FNA3D_BACKBUFFER_SCALE_NEAREST</a></li>
<li><a href="#fna3d_opengl_window_depthstencilformat">FNA3D_OPENGL_WINDOW_DEPTHSTENCILFORMAT</a></li>
<li><a href="#fna3d_opengl_force_es3">FNA3D_OPENGL_FORCE_ES3</a></li>
<li><a href="#fna3d_opengl_force_core_profile">FNA3D_OPENGL_FORCE_CORE_PROFILE</a></li>
<li><a href="#fna3d_opengl_force_compatibility_profile">FNA3D_OPENGL_FORCE_COMPATIBILITY_PROFILE</a></li>
</ul>
<hr />
<h3 id="fna_graphics_enable_highdpi">FNA_GRAPHICS_ENABLE_HIGHDPI</h3>
<p>While many modern displays are capable of much higher DPIs (such as "Retina" displays on macOS and iOS), XNA does not have any mechanism for supporting high-DPI rendering.</p>
<p>Enabling this feature is as simple as setting this before creating your Game:</p>
<pre><code>Environment.SetEnvironmentVariable(&quot;FNA_GRAPHICS_ENABLE_HIGHDPI&quot;, &quot;1&quot;);
</code></pre>
<p>After calling your Game constructor, you can then check to see if high-DPI creation was successful:</p>
<p><code>Settings.HighDPI = Environment.GetEnvironmentVariable("FNA_GRAPHICS_ENABLE_HIGHDPI") == "1";</code></p>
<p>While it is possible for us to create windows with high-DPI drawing space, we cannot guarantee that it will be available at all times. Worse, we can only acquire this feature on startup, so toggling high-DPI mode will require restarting your game.</p>
<p>When this is enabled, the drawable size will take priority over the window size. So, when running at 1920x1080 in windowed mode, the <em>drawable</em> size will be 1920x1080, but the <em>window</em> size will be 960x540. This allows users to set the game resolution to the maximum resolution allowed by the OS while having the appropriate window size.</p>
<p>In fullscreen mode we will continue to run at the desktop resolution with a faux-backbuffer for non-native resolutions, but in high-DPI mode the native resolution will now be the <em>actual</em> native resolution rather than the <em>simulated</em> resolution.</p>
<p>As always, be sure that your RenderTargets and Viewports match the backbuffer size and NOT the window size!</p>
<p>Lastly, when packaging for macOS, be sure this is in your app bundle's Info.plist:</p>
<pre><code class="language-plist">    &lt;key&gt;NSHighResolutionCapable&lt;/key&gt;
    &lt;string&gt;True&lt;/string&gt;
</code></pre>
<p>This variable is accessible to users by passing <code>/enablehighdpi:1</code> as a launch option.</p>
<h3 id="fna_graphics_jpeg_save_quality">FNA_GRAPHICS_JPEG_SAVE_QUALITY</h3>
<p>For some reason they didn't expose a quality parameter to SaveAsJpeg, so we added one ourselves! This variable is checked each time you call the function, so feel free to customize this based on the context for each time you save an image. The value is expected to be between 1 and 100.</p>
<h3 id="fna_keyboard_use_scancodes">FNA_KEYBOARD_USE_SCANCODES</h3>
<p>XNA keys are based on keycodes, rather than scancodes.</p>
<p>With SDL, for example, you can actually pick between SDL_Keycode and SDL_Scancode, but scancodes will not be accurate to XNA4. The benefit is that scancodes will ignore "foreign" keyboard layouts, making default keyboard layouts work out of the box everywhere (unless the actual symbol for the keys matters in your game).</p>
<p>While FNA provides the <a href="../5%3A-FNA-Extensions/#getkeyfromscancodeext">GetKeyFromScancodeEXT</a> extension and developers are encouraged to use it, this is not a required function and users may benefit from this environment variable in the event that layouts are not checked in-game.</p>
<p>In either case, <a href="../5%3A-FNA-Extensions/#textinputext">TextInputEXT</a> will still read the actual chars correctly, so you can (mostly) have your cake and eat it too if you don't care about your bindings menu not making a lot of sense on foreign layouts.</p>
<p>To use scancodes instead of keycodes, set this variable to "1" before starting the game.</p>
<p>This variable is accessible to users by passing <code>/usescancodes:1</code> as a launch option.</p>
<h3 id="fna_gamepad_num_gamepads">FNA_GAMEPAD_NUM_GAMEPADS</h3>
<p>XNA4 supports four controllers, per XInput's limitations. However, SDL gives us the ability to support more controllers when available. You can set this environment variable on/before program startup to set a controller count without modifying FNA:</p>
<pre><code class="language-cs">Environment.SetEnvironmentVariable(&quot;FNA_GAMEPAD_NUM_GAMEPADS&quot;, &quot;8&quot;);
</code></pre>
<h3 id="fna_sdl_force_base_path">FNA_SDL_FORCE_BASE_PATH</h3>
<p>For the desktop, we use <code>AppDomain.CurrentDomain.BaseDirectory</code> as the root path, as this is more accurate on platforms where the "real" EXE path is the path of the CLR. However, there may be some scenarios even on desktop where SDL_GetBasePath() is more appropriate. If you want to override our defaults, this variable can be set on startup.</p>
<h3 id="fna3d_force_driver">FNA3D_FORCE_DRIVER</h3>
<p>FNA3D supports multiple graphics backends with a single binary. Sometimes the default may not produce the optimal result for specific hardware, or a backend may exhibit graphics driver bugs that are not present in other backends. The list of available driver strings for this environment variable is as follows, in order of the current default priority:</p>
<ul>
<li>SDL_GPU (Vulkan, Metal, D3D12)</li>
<li>D3D11</li>
<li>OpenGL</li>
</ul>
<p>This variable is accessible to users by passing <code>/gldevice:%s</code> as a launch option, where <code>%s</code> can be one of the above strings. Note that the string must match an available driver <em>exactly</em>, or device creation will fail!</p>
<h3 id="fna3d_enable_hdr_colorspace">FNA3D_ENABLE_HDR_COLORSPACE</h3>
<p>The XNA specification includes multiple surface formats capable of using an HDR colorspace - however, all rendering is assumed to be standard sRGB. Applications can set this variable to "1" to enable support for creating swapchains with the HDR10 (Rgba1010102) and extended sRGB (HalfVector4/HdrBlendable) colorspaces.</p>
<p>Note that this only exposes the ability to set the colorspace of the swapchain and nothing else - any and all colorspace conversion still has to be done by the application. Additionally, be careful when adding user-facing support for HDR; it should be treated as the equivalent of a full kernel modeset, so it is very expensive and fragile to attempt anywhere except on startup!</p>
<p>This feature is only supported on Vulkan and D3D11.</p>
<h3 id="fna3d_enable_lateswaptear">FNA3D_ENABLE_LATESWAPTEAR</h3>
<p>For many years FNA would default to using <code>FIFO_RELAXED</code>/<a href="https://www.khronos.org/registry/OpenGL/extensions/EXT/GLX_EXT_swap_control_tear.txt">EXT_swap_control_tear</a> VSync to improve performance when games temporarily performed below the display's refresh rate. However, in recent years this has fallen out of fashion; most platforms don't support this feature at all and the platforms that <em>did</em> support it have opted to avoid presentation systems that involve tearing at all (in favor of other systems like "mailbox" presentation). Additionally, refresh rates have rapidly become unstandardized within the last hardware generation, so fixed-rate games would see tearing if the game rate was below the refresh rate of the monitor. Some may still want to try using the late swap tear feature with their OS/driver/display combo, however, so users can set this to "1" if they'd like.</p>
<p>This variable is also accessible to users by passing <code>/enablelateswaptear:1</code> as a launch option.</p>
<h3 id="fna3d_mojoshader_profile">FNA3D_MOJOSHADER_PROFILE</h3>
<p>FNA3D uses <a href="https://icculus.org/mojoshader/">MojoShader</a> to support XNA4 (D3D9) Effect shader binaries. One major benefit of MojoShader is that it supports multiple shader profiles, including GLSL and SPIR-V. By default, each renderer picks the most appropriate shader profile by itself, but you can set this variable to forcibly use a specific profile.</p>
<p>Unless you're a developer working on a new shader profile, this is probably useless to you.</p>
<p>This variable is accessible to users by passing <code>/mojoshaderprofile:%s</code> as a launch option, where <code>%s</code> can be <code>glsl120</code> or <code>glspirv</code>. Currently this is only useful for OpenGL.</p>
<h3 id="fna3d_backbuffer_scale_nearest">FNA3D_BACKBUFFER_SCALE_NEAREST</h3>
<p>When using the faux-backbuffer, we use a linear filter to blit to the window's backbuffer. However, some games may prefer to use a point/nearest-neighbor filter to scale in specific scenarios (such as pixel art games running in multiples of the desktop resolution). To use that filter instead, set this variable to "1" before running the game.</p>
<p>This variable is accessible to users by passing <code>/backbufferscalenearest:1</code> as a launch option.</p>
<h3 id="fna3d_opengl_window_depthstencilformat">FNA3D_OPENGL_WINDOW_DEPTHSTENCILFORMAT</h3>
<p>OpenGL contexts are very clunky and require the RGB/Depth/Stencil sizes at window creation time rather than context creation time, and cannot be reset without destroying the window and GL context. By default we play it safe and create a window with a <code>Depth24Stencil8</code> backbuffer, but if you want to optimize on this you can set this environment variable to a <code>DepthFormat</code> enum value at program startup to override our settings. For example:</p>
<pre><code class="language-cs">SDL3.SDL.SDL_SetHintWithPriority(
    &quot;FNA3D_OPENGL_WINDOW_DEPTHSTENCILFORMAT&quot;,
    &quot;None&quot;,
    SDL3.SDL.SDL_HintPriority.SDL_HINT_OVERRIDE
);
</code></pre>
<p>Note, however, that the OS may completely ignore your settings and pick whatever it wants for its window backbuffer format. (This is rare, but it's still a nonzero chance...)</p>
<h3 id="fna3d_opengl_force_es3">FNA3D_OPENGL_FORCE_ES3</h3>
<p>FNA3D has support for OpenGL ES 3.0. Formerly used for iOS/tvOS, it is also known to work with Google's ANGLE project (D3D11 only) and, to some extent, some Android hardware. This may also be useful to those that would like to try to port to new ES platforms (WebAssembly, Android, etc.). Simply set this to "1" on startup and an ES context will be used instead of a desktop context.</p>
<p>This variable is accessible to users by passing <code>/glprofile:es3</code> as a launch option.</p>
<h3 id="fna3d_opengl_force_core_profile">FNA3D_OPENGL_FORCE_CORE_PROFILE</h3>
<p>FNA3D currently aims for OpenGL 2.1 with a handful of ARB extensions for features like multisampling, hardware instancing, and so on. However, we are also capable of targeting the OpenGL 4.6 Core Profile, with a small handful of mostly-harmless changes. <a href="https://renderdoc.org/">RenderDoc</a> requires this to capture frames; set this variable to "1" in the capture GUI before launching to successfully capture frames.</p>
<p>While this does enable Core Profile features, note that we still do what your engine tells us to do. For example, even though client-side vertex/index data is forbidden, we still still attempt to render as such, and ARB_debug_output as well as the RenderDoc capturing system will throw errors (and possibly crash) because you are not using buffer objects.</p>
<p>Note that this is probably useless in every situation other than accommodating graphics debuggers.</p>
<p>This variable is accessible to users by passing <code>/glprofile:core</code> as a launch option.</p>
<h3 id="fna3d_opengl_force_compatibility_profile">FNA3D_OPENGL_FORCE_COMPATIBILITY_PROFILE</h3>
<p>Some devices (i.e. NVIDIA Tegra) will default to either an OpenGL ES context or a modern OpenGL context that is incompatible with certain legacy OpenGL features. However, sometimes those devices will support the context version that FNA3D tries to aim for, so this variable exists to let developers attempt a 2.1 Compatibility context for those situations. That said, if your device wants a context version that your data isn't compatible with, try fixing the data at some point!</p>
<p>This variable is accessible to users by passing <code>/glprofile:compatibility</code> as a launch option.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../6%3A-FNA-Build-Options/" class="btn btn-neutral float-left" title="6: FNA Build Options"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../8%3A-Contributing-to-FNA/" class="btn btn-neutral float-right" title="8: Contributing to FNA">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/FNA-XNA/docs" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../6%3A-FNA-Build-Options/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../8%3A-Contributing-to-FNA/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
